# $Id: Portfile 26918 2007-07-11 15:28:15Z gwright@macports.org $

PortSystem	1.0
name		logtalk
version 	2.30.9

categories	lang
maintainers	pmoura@logtalk.org
platforms	darwin freebsd linux
description	Logtalk - Open source object-oriented logic programming language

long_description	\
		Logtalk is an open source object-oriented logic programming language	\
		that can use most Prolog implementations as a back-end compiler.		\
		As a multi-paradigm language, Logtalk includes support for both 		\
		prototypes and classes, protocols, component-based programming 			\
		through category-based composition, event-driven programming, and 		\
		multi-threading programming.

homepage        http://logtalk.org/
master_sites	${homepage}files/

checksums md5 c80bc685a5868639edc66cff9fde6f6c

distname lgt[strsed ${version} {g/\.//}]
extract.suffix .tar.bz2

use_bzip2 yes

configure	{}

build		{}

destroot	{
	system "cd ${workpath}/${worksrcdir}/scripts && ./install.sh ${destroot}/${prefix}"
}

post-pkg {
	set resources ${workpath}/${name}-${version}.pkg/Contents/Resources/
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/License.html ${resources}
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/ReadMe.html ${resources}
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/Welcome.html ${resources}
	file copy -force -- ${workpath}/${worksrcdir}/scripts/macosx/postflight ${resources}
}

post-activate {
	ui_msg "****************************************************************************"
	ui_msg "*  Integration scripts have been created for running Logtalk with selected"
	ui_msg "*  back-end Prolog compilers (which must be properly installed for running"
	ui_msg "*  the scripts!):"
	ui_msg "*"
	ui_msg "*    B-Prolog:       bplgt        (first run must use sudo)"
	ui_msg "*    CIAO:           ciaolgt      (first run must use sudo)"
	ui_msg "*    CxProlog:       cxlgt"
	ui_msg "*    ECLiPSe:        eclipselgt"
	ui_msg "*    GNU Prolog:     gplgt"
	ui_msg "*    K-Prolog:       plclgt"
	ui_msg "*    Qu-Prolog:      qplgt"
	ui_msg "*    SICStus Prolog: sicstuslgt"
	ui_msg "*    SWI-Prolog:     swilgt"
	ui_msg "*    XSB:            xsblgt       (first run must use sudo)"
	ui_msg "*    XSB (MT):       xsbmtlgt     (first run must use sudo)"
	ui_msg "*    YAP:            yaplgt"
	ui_msg "*"
	ui_msg "* Remember to set the environment variable LOGTALKHOME to the path to"
	ui_msg "* the Logtalk distribution: ${prefix}/share/logtalk"
	ui_msg "* and the environment variable LOGTALKUSER to your local configuration"
	ui_msg "* directory (usually ~/logtalk), which you can create by running the"
	ui_msg "* command cplgtdirs. See the file \$LOGTALKHOME/CUSTOMIZE.txt for details"
	ui_msg "* on how to customize your working environment."
	ui_msg "****************************************************************************"
}
